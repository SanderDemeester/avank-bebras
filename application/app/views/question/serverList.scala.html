@(currentPage: Page[models.question.Server], currentOrderBy: String, currentOrder: String, currentFilter: String, breadcrumbs : List[models.data.Link])

@*****************************************
* Helper generating the navigation links *
*****************************************@
@link(newPage: Int, newOrderBy: String) = @{

    var orderBy = currentOrderBy
    var order = currentOrder

        if(newOrderBy != null) {
            orderBy = newOrderBy
            if(currentOrderBy == newOrderBy) {
                if(currentOrder == "asc") {
                    order = "desc"
                } else {
                    order = "asc"
                }
            } else {
                order = "asc"
            }
        }

    controllers.question.routes.ServerController.list(newPage, 10, orderBy, order, currentFilter)
}

@***************************************
* Helper generating the column headers *
***************************************@
@header(key: String, title: String) = {
    <th class="@key.replace(".","_") header @if(currentOrderBy == key) @{if(currentOrder == "asc") "headerSortDown" else "headerSortUp"}">
        <a href="@link(0, key)">@title</a>
    </th>
}

@***********************
* The list view itself *
***********************@
@main("List of servers", breadcrumbs) {

    <h2>List of servers</h2>

    <!-- filtering and adding servers -->
    <div id="actions">

        <!-- when filtering, the first page has to be returned -->
        <form action="@link(0,"name")" method="GET">
            <input type="text" class="input-medium search-query" name="f" value="@currentFilter" placeholder="Filter by server name...">
            <input type="submit" id="searchsubmit" value="Filter by name" class="btn">
        </form>

        <!-- a button for adding a new server -->
        <p>
        <a class="btn" href="@controllers.question.routes.ServerController.create()"> Add new server </a>
        </p>

    </div>

    <!-- the list of servers -->
    @if(currentPage.getTotalRowCount == 0){
        <div>
            <p> Nothing to display </p>
        </div>
    } else {
        <table class="table table-striped table-bordered table-hover">

            <thead>
            <tr>
                @header("name", "Server name")
                @header("path", "Server's path")
                @header("baseUrl", "Server's base URL")
                @header("edit", "Edit server")
                @header("remove", "Remove server")
            </tr>
            </thead>

            <tbody>

                @for(server <- currentPage.getList){
                    <tr>
                         <td> @server.name </td>
                         <td> @server.path </td>
                         <td> @server.baseUrl </td>
                         <td> <a class="button succes" id="edit" href="@controllers.question.routes.ServerController.edit(server.name)"> Edit </a></td>
                         <td> <a class="button succes" id="remove" href="@controllers.question.routes.ServerController.remove(server.name)"> Remove </a> </td>
                    </tr>
                }

            </tbody>

        </table>

        <!-- pagination buttons -->
        <div id="pagination" class="pagination pagination-centered">
            <ul>
                @if(currentPage.hasPrev) {
                <li class="prev">
                    <a href="@link(currentPage.getPageIndex - 1, null)">&larr; Previous</a>
                </li>
                } else {
                <li class="prev disabled">
                    <a>&larr; Previous</a>
                </li>
                }
                <li class="current">
                    <a>Displaying @currentPage.getDisplayXtoYofZ(" to "," of ")</a>
                </li>
                @if(currentPage.hasNext) {
                <li class="next">
                    <a href="@link(currentPage.getPageIndex + 1, null)">Next &rarr;</a>
                </li>
                } else {
                <li class="next disabled">
                    <a>Next &rarr;</a>
                </li>
                }
            </ul>
        </div>

    }

}
