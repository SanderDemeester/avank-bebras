@(competition : models.competition.Competition, breadcrumbs : List[models.data.Link])

@import helper._
@import helper.twitterBootstrap._
@import models.EMessages

@main(EMessages.get("competition.name"), breadcrumbs){
	<div class="well">
		TODO: Roles, EMessages
		<div class="pull-right">
			<button id="submitAnswers" class="btn">Submit pupil answers</button>
			<button id="stopCompetition" class="btn btn-danger">Stop competition</button>
		</div>
		<h1 class="muted">Competition: <i>@competition.getName()</i></h1>
		<div id="alert" class="hide"></div>
		<hr />
		<h2>Progress</h2>
		<div class="text-center">
			<div>Time left: <span id="countdown">02:10</span></div>
			<div id="timeprogress" class="progress progress-striped active">
			  <div class="bar" style="width: 0%;"></div>
			</div>
			<div>Finished: <span id="finished"><span class="finished">...</span>/<span class="total">...</span></span></div>
			<div id="finishedprogress" class="progress progress-striped active">
			  <div class="bar" style="width: 0%;"></div>
			</div>
		</div>
		<hr />
		<h2>Details</h2>
		<table class="table table-striped table-condensed table-hover table-bordered">
			<tr><th>ID</th><td>@competition.getID()</td></tr>
			<tr><th>Duration</th><td>@competition.getDuration() minutes</td></tr>
			<tr><th>Start date</th><td>@controllers.util.DateFormatter.formatDate(competition.getStartDate(), true)</td></tr>
			<tr><th>Expiration date</th><td>@controllers.util.DateFormatter.formatDate(competition.getExpirationDate(), true)</td></tr>
			<tr><th>Question sets</th><td>
			<ul class="unstyled">
			@for(grade <- competition.getAvailableGrades()) {
				<li><strong>@grade.getName()</strong>: @competition.getQuestionSet(grade).getName() </li>
			}
			</ul>
			</td></tr>
			<tr><th>Available languages</th><td>
			<ul class="unstyled">
			@for(language <- competition.getAvailableLanguages()) {
				<li>@language.getName()</li>
			}
			</ul>
			</td></tr>
		</table>
	</div>
	
	<!-- Hidden modal -->
    <div id="submitting" class="modal hide fade">
        <div class="modal-header">
        	<h3>@EMessages.get("competition.modal.submitting")</h3>
        </div>
        <div class="modal-body text-center">
            <div><i class='icon-spinner'></i></div><br />
            <p>@EMessages.get("competition.modal.sendingAnswers")</p>
        </div>
        <div class="modal-footer"></div>
    </div>
	
	<!-- Hidden modal -->
    <div id="submitAnswersModal" class="modal hide fade">
        <div class="modal-header">
        	<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        	<h3>Submit pupil answers</h3>
        </div>
        <div class="modal-body">
            <div id="modalError" class="alert alert-error lead hide"></div>
            <div>
	            <p>Paste the code that you've copied from the pupil's screen in this textfield and click 'Submit'.</p>
	            <div class="row-fluid">
	            	<textarea id="answerscode" rows="10" class="span12"></textarea>
	            </div>
            </div>
        </div>
        <div class="modal-footer">
        	<button id="submitAnswersCancel" class="btn">@EMessages.get("forms.cancel")</button>
			<button id="submitAnswersConfirm" class="btn btn-primary">@EMessages.get("forms.submit")</button>
        </div>
    </div>
	
	<script type="text/javascript">
	var competitionid = "@competition.getID()";
	var deadline = @competition.getExpirationDate().getTime();
	var starting = @{competition.getStartDate().getTime()}
	
	// Translations
	var messages = new Object();
	
	</script>
	<script src="@routes.Assets.at("javascripts/competition/jquery.countdown.min.js")" type="text/javascript"></script>
	<script src="@routes.Assets.at("javascripts/competition/jquery.base64.min.js")" type="text/javascript"></script>
	<script src="@routes.Assets.at("javascripts/competition/overview.js")" type="text/javascript"></script>
}